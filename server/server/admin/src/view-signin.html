<html><head></head><body><dom-module id="view-signin"><template><style include="shared-styles">:host{display:block;height:100vh;width:100%;background-image:url('../images/background.jpg');background-size:100% 100%;@apply (--layout-vertical);@apply (--layout-center-center);}.box{@apply (--layout-vertical);@apply (--layout-center-center);margin-top:24px;width:250px;padding:16px;}img{width:250px;}</style><iron-ajax on-error="_handleAjaxError" on-response="_handleAjaxResponse"></iron-ajax><div class="box"><img src="images/logo.png"><h2>Server Management</h2><iron-form><form on-keydown="_signIn"><vaadin-text-field label="Username" name="username" required="" value=""></vaadin-text-field><br><vaadin-password-field label="Password" name="password" value="" required=""></vaadin-password-field></form></iron-form><vaadin-button on-click="_signIn">Sign In</vaadin-button></div><paper-dialog modal=""><h1 style="margin-bottom: 12px;">Oops...</h1><span>{{_errorMessage}}</span><div class="buttons" style="padding: 0px !important; margin-top: 12px;"><vaadin-button dialog-confirm="" autofocus="">I understand</vaadin-button></div></paper-dialog></template><script>var ViewSignin=function(_Polymer$Element){babelHelpers.inherits(ViewSignin,_Polymer$Element);function ViewSignin(){babelHelpers.classCallCheck(this,ViewSignin);return babelHelpers.possibleConstructorReturn(this,(ViewSignin.__proto__||Object.getPrototypeOf(ViewSignin)).apply(this,arguments))}babelHelpers.createClass(ViewSignin,[{key:"_signIn",value:function _signIn(evt){if(evt.keyCode&&13!=evt.keyCode)return;var form=Polymer.dom(this.root).querySelector("iron-form").serializeForm(),ironAjax=Polymer.dom(this.root).querySelector("iron-ajax");if(0>=form.password.length||0>=form.username.length)return this._displayError("Please fill correctly the sign in form in order to proceed.");form.password=form.password.toLowerCase();ironAjax.method="POST";ironAjax.url=window.projectUrl+"/api/admin/auth/signin";ironAjax.contentType="application/json";ironAjax.body=form;ironAjax.generateRequest()}},{key:"_handleAjaxResponse",value:function _handleAjaxResponse(event){var _response=event.detail.response;this.dispatchEvent(new CustomEvent("sign-in",{detail:_response,bubbles:!0,composed:!0}))}},{key:"_displayError",value:function _displayError(message){this._errorMessage=message;Polymer.dom(this.root).querySelector("paper-dialog").open()}},{key:"_handleAjaxError",value:function _handleAjaxError(event){var message=event.detail.request.response.message;if("User doesn't exist"===event.detail.request.response.message)message="No user found. Is your username and password correct?";this._displayError(message)}}],[{key:"is",get:function get(){return"view-signin"}}]);return ViewSignin}(Polymer.Element);window.customElements.define(ViewSignin.is,ViewSignin);</script></dom-module></body></html>