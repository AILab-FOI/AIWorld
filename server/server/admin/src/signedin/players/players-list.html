<html><head></head><body><dom-module id="players-list"><template><style include="shared-styles">:host{display:block;margin:8px;}#toolbar{@apply (--layout-horizontal);@apply (--layout-justified);}</style><iron-ajax id="ajaxCreateCustomer" on-response="_customerCreated" on-error="_customerNotCreated"></iron-ajax><iron-ajax id="ajaxChangeplayerstatus" on-response="_statusEdited"></iron-ajax><div id="toolbar"><div></div><vaadin-button on-tap="_createCustomer">New user</vaadin-button></div><vaadin-grid style="width: 100%; height: 400px;" name="ordersbook" aria-label="Orders book" items="[[players]]"><vaadin-grid-column resizable=""><template class="header"><vaadin-grid-filter aria-label="Username" path="username" value="[[_filterusername]]"><input placeholder="username" value="{{_filterusername::input}}" focus-target=""></vaadin-grid-filter></template><template>{{item.username}}</template></vaadin-grid-column><vaadin-grid-column resizable=""><template class="header"><vaadin-grid-filter aria-label="Permission" path="permission" value="[[_filterpermission]]"><input placeholder="permission" value="{{_filterpermission::input}}" focus-target=""></vaadin-grid-filter></template><template>{{item.permission}}</template></vaadin-grid-column><vaadin-grid-column resizable=""><template class="header"><vaadin-grid-filter aria-label="Level" path="level" value="[[_filterlevel]]"><input placeholder="level" value="{{_filterlevel::input}}" focus-target=""></vaadin-grid-filter></template><template>{{item.stats.level}}</template></vaadin-grid-column><vaadin-grid-column resizable="" flex-grow="0"><template class="header"><span></span></template><template><a href="/players/view/{{item.id}}"><vaadin-button>View</vaadin-button></a></template></vaadin-grid-column></vaadin-grid><paper-dialog id="createCustomer"><h2>New player</h2><iron-form id="formCreateCustomer"><form><vaadin-text-field required="" value="" label="Username" name="username"></vaadin-text-field><vaadin-password-field required="" value="" label="Password" name="password"></vaadin-password-field></form></iron-form><div class="buttons" style="padding: 0px !important;"><vaadin-button dialog-dismiss="" autofocus="">Cancel</vaadin-button><vaadin-button dialog-confirm="" autofocus="" on-tap="_createCustomer">Ok</vaadin-button></div></paper-dialog></template><script>var playersList=function(_Polymer$Element){babelHelpers.inherits(playersList,_Polymer$Element);function playersList(){babelHelpers.classCallCheck(this,playersList);return babelHelpers.possibleConstructorReturn(this,(playersList.__proto__||Object.getPrototypeOf(playersList)).apply(this,arguments))}babelHelpers.createClass(playersList,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(playersList.prototype.__proto__||Object.getPrototypeOf(playersList.prototype),"connectedCallback",this).call(this);this._canChangeSupervisor=99<=this.authSession.permission?!0:!1}},{key:"_createCustomer",value:function _createCustomer(){var paperDialog=Polymer.dom(this.root).querySelector("paper-dialog#createCustomer"),form=Polymer.dom(this.root).querySelector("#formCreateCustomer").serializeForm(),ironAjax=Polymer.dom(this.root).querySelector("#ajaxCreateCustomer");if(!paperDialog.opened){paperDialog.toggle();return}if(0>=(form.username.length||form.password.length))return this.dispatchEvent(new CustomEvent("show-modal",{bubbles:!0,composed:!0,detail:{title:"Error occured",message:"Please fill all the form correctly"}}));Polymer.dom(this.root).querySelector("#formCreateCustomer").children[0].reset();ironAjax.method="POST";ironAjax.headers={"X-Access-Token":this.authSession.token,"X-Socket-ID":window.socket.id};ironAjax.url=window.projectUrl+"/api/auth/signup/";ironAjax.body=form;ironAjax.contentType="application/json";ironAjax.generateRequest()}},{key:"_customerCreated",value:function _customerCreated(){this.dispatchEvent(new CustomEvent("reload-players",{bubbles:!0,composed:!0}));return this.dispatchEvent(new CustomEvent("show-modal",{bubbles:!0,composed:!0,detail:{title:"New player created",message:"The new player has been successfully created."}}))}},{key:"_customerNotCreated",value:function _customerNotCreated(){var message=event.detail.request.response.message;if("email used"===event.detail.request.response.message)message="The username is already being used.";return this.dispatchEvent(new CustomEvent("show-modal",{bubbles:!0,composed:!0,detail:{title:"Error occured",message:message}}))}}],[{key:"is",get:function get(){return"players-list"}}]);return playersList}(Polymer.Element);window.customElements.define(playersList.is,playersList);</script></dom-module></body></html>