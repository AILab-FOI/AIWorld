<html><head></head><body><dom-module id="banks-list"><template><style include="shared-styles">:host{display:block;margin:8px;}#toolbar{@apply (--layout-horizontal);@apply (--layout-justified);}</style><iron-ajax id="ajaxCreateCustomer" on-response="_customerCreated" on-error="_customerNotCreated"></iron-ajax><iron-ajax id="ajaxDeleteCustomer" on-response="_customerCreated" on-error="_customerNotCreated"></iron-ajax><div id="toolbar"><div></div><vaadin-button on-tap="_createCustomer">Create bank</vaadin-button></div><vaadin-grid style="width: 100%; height: 400px;" name="ordersbook" aria-label="Orders book" items="[[banks]]"><vaadin-grid-column resizable=""><template class="header"><vaadin-grid-filter aria-label="Name" path="name" value="[[_filtername]]"><input placeholder="Name" value="{{_filtername::input}}" focus-target=""></vaadin-grid-filter></template><template>{{item.name}}</template></vaadin-grid-column><vaadin-grid-column resizable=""><template class="header"><vaadin-grid-filter aria-label="Type" path="type" value="[[_filtertype]]"><input placeholder="Type" value="{{_filtertype::input}}" focus-target=""></vaadin-grid-filter></template><template>{{item.type}}</template></vaadin-grid-column><vaadin-grid-column resizable="" flex-grow="0"><template class="header"><span></span></template><template><vaadin-button on-tap="_deleteBank">Delete</vaadin-button></template></vaadin-grid-column></vaadin-grid><paper-dialog id="createCustomer"><h2>New bank</h2><iron-form id="formCreateCustomer"><form><vaadin-text-field required="" value="" label="Bank name" name="name"></vaadin-text-field><span>Bank type :</span> <select name="type"><option value="local">Local</option><option value="global">Global</option></select></form></iron-form><div class="buttons" style="padding: 0px !important;"><vaadin-button dialog-dismiss="" autofocus="">Cancel</vaadin-button><vaadin-button dialog-confirm="" autofocus="" on-tap="_createCustomer">Ok</vaadin-button></div></paper-dialog></template><script>var BanksList=function(_Polymer$Element){babelHelpers.inherits(BanksList,_Polymer$Element);function BanksList(){babelHelpers.classCallCheck(this,BanksList);return babelHelpers.possibleConstructorReturn(this,(BanksList.__proto__||Object.getPrototypeOf(BanksList)).apply(this,arguments))}babelHelpers.createClass(BanksList,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(BanksList.prototype.__proto__||Object.getPrototypeOf(BanksList.prototype),"connectedCallback",this).call(this);console.log("test")}},{key:"_createCustomer",value:function _createCustomer(){var paperDialog=Polymer.dom(this.root).querySelector("paper-dialog#createCustomer"),form=Polymer.dom(this.root).querySelector("#formCreateCustomer").serializeForm(),ironAjax=Polymer.dom(this.root).querySelector("#ajaxCreateCustomer");if(!paperDialog.opened){paperDialog.toggle();return}if(0>=form.name.length)return this.dispatchEvent(new CustomEvent("show-modal",{bubbles:!0,composed:!0,detail:{title:"Error occured",message:"Please fill all the form correctly"}}));Polymer.dom(this.root).querySelector("#formCreateCustomer").children[0].reset();ironAjax.method="POST";ironAjax.headers={"X-Access-Token":this.authSession.token,"X-Socket-ID":window.socket.id};ironAjax.url=window.projectUrl+"/api/admin/banks/";ironAjax.body=form;ironAjax.contentType="application/json";ironAjax.generateRequest()}},{key:"_customerCreated",value:function _customerCreated(){this.dispatchEvent(new CustomEvent("reload-banks",{bubbles:!0,composed:!0}))}},{key:"_customerNotCreated",value:function _customerNotCreated(){event.detail.request.response.message}},{key:"_deleteBank",value:function _deleteBank(e){var ironAjax=Polymer.dom(this.root).querySelector("#ajaxDeleteCustomer"),selectedBank=e.model.item;ironAjax.method="DELETE";ironAjax.headers={"X-Access-Token":this.authSession.token,"X-Socket-ID":window.socket.id};ironAjax.url=window.projectUrl+"/api/admin/banks/".concat(selectedBank.id);ironAjax.generateRequest()}}],[{key:"is",get:function get(){return"banks-list"}}]);return BanksList}(Polymer.Element);window.customElements.define(BanksList.is,BanksList);</script></dom-module></body></html>